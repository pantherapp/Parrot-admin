{"ast":null,"code":"var _jsxFileName = \"/Users/yrm/Sites/parrot/src/models/Voice.js\";\nimport React, { useState, useEffect } from 'react';\nimport { List, Datagrid, TextField, Show, SimpleShowLayout } from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\nimport { List as MyList } from '@material-ui/core/List';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst Comment = ({\n  record\n}) => {\n  const dataProvider = useDataProvider();\n  const [total, setTotal] = useState();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState();\n  useEffect(() => {\n    dataProvider.getList('comments', {\n      pagination: {\n        page: 1,\n        perPage: 100000\n      },\n      sort: {},\n      filter: {\n        voice_doc_id: record.id\n      }\n    }).then(({\n      data,\n      total\n    }) => {\n      setTotal(total);\n      setLoading(false);\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  }, []);\n  if (loading) return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 23\n    }\n  });\n  if (error) return /*#__PURE__*/React.createElement(Error, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 21\n    }\n  });\n  if (!total) return 0;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, total, \" comments\");\n};\n\nconst ConditionBooleanField = ({\n  record,\n  ...rest\n}) => {\n  return record.report_users ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }), \"Reported by user\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }), \"No Report\");\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nconst CommentList = ({\n  record\n}) => {\n  const dataProvider = useDataProvider();\n  const [total, setTotal] = useState();\n  const [data, setData] = useState();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState();\n  useEffect(() => {\n    dataProvider.getList('comments', {\n      pagination: {\n        page: 1,\n        perPage: 100000\n      },\n      sort: {},\n      filter: {\n        voice_doc_id: record.id\n      }\n    }).then(({\n      data,\n      total\n    }) => {\n      console.log(data);\n      setTotal(total);\n      setData(data);\n      setLoading(false);\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  });\n};\n\nexport const VoiceList = props => /*#__PURE__*/React.createElement(List, Object.assign({}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 3\n  }\n}), /*#__PURE__*/React.createElement(Datagrid, {\n  rowClick: \"show\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(TextField, {\n  label: \"Location\",\n  source: \"address\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(Comment, {\n  label: \"Comments\",\n  source: \"id\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 7\n  }\n}), /*#__PURE__*/React.createElement(ConditionBooleanField, {\n  source: \"report_users\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 7\n  }\n})));\nexport const VoiceShow = props => /*#__PURE__*/React.createElement(Show, Object.assign({}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 3\n  }\n}), /*#__PURE__*/React.createElement(SimpleShowLayout, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(TextField, {\n  source: \"address\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }\n}), /*#__PURE__*/React.createElement(CommentList, {\n  label: \"Comments\",\n  source: \"id\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }\n}), /*#__PURE__*/React.createElement(ConditionBooleanField, {\n  source: \"report_users\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }\n})));","map":{"version":3,"sources":["/Users/yrm/Sites/parrot/src/models/Voice.js"],"names":["React","useState","useEffect","List","Datagrid","TextField","Show","SimpleShowLayout","useDataProvider","Loading","Error","MyList","makeStyles","ListItem","ListItemIcon","ListItemSecondaryAction","ListItemText","Comment","record","dataProvider","total","setTotal","loading","setLoading","error","setError","getList","pagination","page","perPage","sort","filter","voice_doc_id","id","then","data","catch","ConditionBooleanField","rest","report_users","useStyles","theme","root","width","maxWidth","backgroundColor","palette","background","paper","CommentList","setData","console","log","VoiceList","props","VoiceShow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  List,\n  Datagrid,\n  TextField,\n  Show,\n  SimpleShowLayout\n} from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\nimport { List as MyList } from '@material-ui/core/List';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst Comment = ({ record }) => {\n    const dataProvider = useDataProvider();\n    const [total, setTotal] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    useEffect(() => {\n        dataProvider.getList('comments', { pagination: { page: 1 , perPage: 100000 }, sort: {}, filter: {voice_doc_id: record.id} })\n            .then(({ data, total }) => {\n                setTotal(total);                \n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n  \n  if (loading) return <Loading />;\n  if (error) return <Error />;\n  if (!total) return 0;\n\n  return (\n    <span>{total} comments</span>\n  )\n};\n\nconst ConditionBooleanField = ({ record, ...rest }) => {\n    return record.report_users\n        ? <span><br />Reported by user</span>\n        : <span><br />No Report</span>;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nconst CommentList = ({ record }) => {\n  const dataProvider = useDataProvider();\n    const [total, setTotal] = useState();\n    const [data, setData] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    useEffect(() => {\n        dataProvider.getList('comments', { pagination: { page: 1 , perPage: 100000 }, sort: {}, filter: {voice_doc_id: record.id} })\n            .then(({ data, total }) => {\n              console.log(data);\n                setTotal(total);              \n                setData(data);  \n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n\n  return (\n    <List>\n      {/* {data .map((value) => {\n        const labelId = `checkbox-list-label-${value}`;\n\n        return (\n          <ListItem key={value} role={undefined} dense >\n            <ListItemText id={labelId} primary={`Line item ${value + 1}`} />\n          </ListItem>\n        )\n      })} */}\n    </List>\n  );\n}\n\nexport const VoiceList = props => (\n  <List {...props} >\n    <Datagrid rowClick=\"show\">\n      <TextField label=\"Location\" source=\"address\" />\n      <Comment label=\"Comments\" source=\"id\" />\n      <ConditionBooleanField source=\"report_users\" />\n    </Datagrid>\n  </List>\n);\n\nexport const VoiceShow = props => (\n  <Show {...props}>\n    <SimpleShowLayout>\n        <TextField source=\"address\" />\n        <CommentList label=\"Comments\" source=\"id\" />\n        <ConditionBooleanField source=\"report_users\" />\n    </SimpleShowLayout>\n  </Show>\n);"]},"metadata":{},"sourceType":"module"}