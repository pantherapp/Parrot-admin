{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport { fetchRelatedRecords, useDataProvider, useNotify, ExporterContext } from 'ra-core';\nimport Button from './Button';\n\nvar ExportButton = function ExportButton(_a) {\n  var sort = _a.sort,\n      _b = _a.filter,\n      filter = _b === void 0 ? defaultFilter : _b,\n      _c = _a.maxResults,\n      maxResults = _c === void 0 ? 1000 : _c,\n      resource = _a.resource,\n      onClick = _a.onClick,\n      _d = _a.label,\n      label = _d === void 0 ? 'ra.action.export' : _d,\n      _e = _a.icon,\n      icon = _e === void 0 ? defaultIcon : _e,\n      rest = __rest(_a, [\"sort\", \"filter\", \"maxResults\", \"resource\", \"onClick\", \"label\", \"icon\"]);\n\n  var exporter = useContext(ExporterContext);\n  var dataProvider = useDataProvider();\n  var notify = useNotify();\n  var handleClick = useCallback(function (event) {\n    dataProvider.getList(resource, {\n      sort: sort,\n      filter: filter,\n      pagination: {\n        page: 1,\n        perPage: maxResults\n      }\n    }).then(function (_a) {\n      var data = _a.data;\n      return exporter && exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource);\n    }).catch(function (error) {\n      console.error(error);\n      notify('ra.notification.http_error', 'warning');\n    });\n\n    if (typeof onClick === 'function') {\n      onClick(event);\n    }\n  }, [dataProvider, exporter, filter, maxResults, notify, onClick, resource, sort]);\n  return React.createElement(Button, __assign({\n    onClick: handleClick,\n    label: label\n  }, sanitizeRestProps(rest)), icon);\n};\n\nvar defaultIcon = React.createElement(DownloadIcon, null);\nvar defaultFilter = {};\n\nvar sanitizeRestProps = function sanitizeRestProps(_a) {\n  var basePath = _a.basePath,\n      exporter = _a.exporter,\n      rest = __rest(_a, [\"basePath\", \"exporter\"]);\n\n  return rest;\n};\n\nExportButton.propTypes = {\n  basePath: PropTypes.string,\n  exporter: PropTypes.func,\n  filter: PropTypes.object,\n  label: PropTypes.string,\n  maxResults: PropTypes.number,\n  resource: PropTypes.string.isRequired,\n  sort: PropTypes.exact({\n    field: PropTypes.string,\n    order: PropTypes.string\n  }),\n  icon: PropTypes.element\n};\nexport default ExportButton;","map":{"version":3,"sources":["/Users/yrm/Sites/parrot/node_modules/react-admin/node_modules/ra-ui-materialui/esm/button/ExportButton.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useCallback","useContext","PropTypes","DownloadIcon","fetchRelatedRecords","useDataProvider","useNotify","ExporterContext","Button","ExportButton","_a","sort","_b","filter","defaultFilter","_c","maxResults","resource","onClick","_d","label","_e","icon","defaultIcon","rest","exporter","dataProvider","notify","handleClick","event","getList","pagination","page","perPage","then","data","catch","error","console","createElement","sanitizeRestProps","basePath","propTypes","string","func","object","number","isRequired","exact","field","order","element"],"mappings":"AAAA,IAAIA,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAII,CAAT,IAAcL,CAAd;AAAiB,YAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AADJ;AAEH;;AACD,WAAON,CAAP;AACH,GAPD;;AAQA,SAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACH,CAVD;;AAWA,IAAIO,MAAM,GAAI,QAAQ,KAAKA,MAAd,IAAyB,UAAUV,CAAV,EAAaW,CAAb,EAAgB;AAClD,MAAIZ,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIM,CAAT,IAAcL,CAAd;AAAiB,QAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,KAA8CM,CAAC,CAACC,OAAF,CAAUP,CAAV,IAAe,CAAjE,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AADJ;;AAEA,MAAIL,CAAC,IAAI,IAAL,IAAa,OAAOH,MAAM,CAACgB,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIZ,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGR,MAAM,CAACgB,qBAAP,CAA6Bb,CAA7B,CAApB,EAAqDC,CAAC,GAAGI,CAAC,CAACD,MAA3D,EAAmEH,CAAC,EAApE,EAAwE;AACpE,QAAIU,CAAC,CAACC,OAAF,CAAUP,CAAC,CAACJ,CAAD,CAAX,IAAkB,CAAlB,IAAuBJ,MAAM,CAACS,SAAP,CAAiBQ,oBAAjB,CAAsCN,IAAtC,CAA2CR,CAA3C,EAA8CK,CAAC,CAACJ,CAAD,CAA/C,CAA3B,EACIF,CAAC,CAACM,CAAC,CAACJ,CAAD,CAAF,CAAD,GAAUD,CAAC,CAACK,CAAC,CAACJ,CAAD,CAAF,CAAX;AACP;AACL,SAAOF,CAAP;AACH,CAVD;;AAWA,OAAOgB,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,QAA+C,OAA/C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,SAASC,mBAAT,EAA8BC,eAA9B,EAA+CC,SAA/C,EAA0DC,eAA1D,QAAkF,SAAlF;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AACA,IAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,EAAV,EAAc;AAC7B,MAAIC,IAAI,GAAGD,EAAE,CAACC,IAAd;AAAA,MAAoBC,EAAE,GAAGF,EAAE,CAACG,MAA5B;AAAA,MAAoCA,MAAM,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgBE,aAAhB,GAAgCF,EAA7E;AAAA,MAAiFG,EAAE,GAAGL,EAAE,CAACM,UAAzF;AAAA,MAAqGA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAAzI;AAAA,MAA6IE,QAAQ,GAAGP,EAAE,CAACO,QAA3J;AAAA,MAAqKC,OAAO,GAAGR,EAAE,CAACQ,OAAlL;AAAA,MAA2LC,EAAE,GAAGT,EAAE,CAACU,KAAnM;AAAA,MAA0MA,KAAK,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,kBAAhB,GAAqCA,EAAvP;AAAA,MAA2PE,EAAE,GAAGX,EAAE,CAACY,IAAnQ;AAAA,MAAyQA,IAAI,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgBE,WAAhB,GAA8BF,EAA9S;AAAA,MAAkTG,IAAI,GAAG9B,MAAM,CAACgB,EAAD,EAAK,CAAC,MAAD,EAAS,QAAT,EAAmB,YAAnB,EAAiC,UAAjC,EAA6C,SAA7C,EAAwD,OAAxD,EAAiE,MAAjE,CAAL,CAA/T;;AACA,MAAIe,QAAQ,GAAGxB,UAAU,CAACM,eAAD,CAAzB;AACA,MAAImB,YAAY,GAAGrB,eAAe,EAAlC;AACA,MAAIsB,MAAM,GAAGrB,SAAS,EAAtB;AACA,MAAIsB,WAAW,GAAG5B,WAAW,CAAC,UAAU6B,KAAV,EAAiB;AAC3CH,IAAAA,YAAY,CACPI,OADL,CACab,QADb,EACuB;AACnBN,MAAAA,IAAI,EAAEA,IADa;AAEnBE,MAAAA,MAAM,EAAEA,MAFW;AAGnBkB,MAAAA,UAAU,EAAE;AAAEC,QAAAA,IAAI,EAAE,CAAR;AAAWC,QAAAA,OAAO,EAAEjB;AAApB;AAHO,KADvB,EAMKkB,IANL,CAMU,UAAUxB,EAAV,EAAc;AACpB,UAAIyB,IAAI,GAAGzB,EAAE,CAACyB,IAAd;AACA,aAAOV,QAAQ,IACXA,QAAQ,CAACU,IAAD,EAAO/B,mBAAmB,CAACsB,YAAD,CAA1B,EAA0CA,YAA1C,EAAwDT,QAAxD,CADZ;AAEH,KAVD,EAWKmB,KAXL,CAWW,UAAUC,KAAV,EAAiB;AACxBC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAV,MAAAA,MAAM,CAAC,4BAAD,EAA+B,SAA/B,CAAN;AACH,KAdD;;AAeA,QAAI,OAAOT,OAAP,KAAmB,UAAvB,EAAmC;AAC/BA,MAAAA,OAAO,CAACW,KAAD,CAAP;AACH;AACJ,GAnB4B,EAmB1B,CACCH,YADD,EAECD,QAFD,EAGCZ,MAHD,EAICG,UAJD,EAKCW,MALD,EAMCT,OAND,EAOCD,QAPD,EAQCN,IARD,CAnB0B,CAA7B;AA6BA,SAAQZ,KAAK,CAACwC,aAAN,CAAoB/B,MAApB,EAA4B5B,QAAQ,CAAC;AAAEsC,IAAAA,OAAO,EAAEU,WAAX;AAAwBR,IAAAA,KAAK,EAAEA;AAA/B,GAAD,EAAyCoB,iBAAiB,CAAChB,IAAD,CAA1D,CAApC,EAAuGF,IAAvG,CAAR;AACH,CAnCD;;AAoCA,IAAIC,WAAW,GAAGxB,KAAK,CAACwC,aAAN,CAAoBpC,YAApB,EAAkC,IAAlC,CAAlB;AACA,IAAIW,aAAa,GAAG,EAApB;;AACA,IAAI0B,iBAAiB,GAAG,SAApBA,iBAAoB,CAAU9B,EAAV,EAAc;AAClC,MAAI+B,QAAQ,GAAG/B,EAAE,CAAC+B,QAAlB;AAAA,MAA4BhB,QAAQ,GAAGf,EAAE,CAACe,QAA1C;AAAA,MAAoDD,IAAI,GAAG9B,MAAM,CAACgB,EAAD,EAAK,CAAC,UAAD,EAAa,UAAb,CAAL,CAAjE;;AACA,SAAOc,IAAP;AACH,CAHD;;AAIAf,YAAY,CAACiC,SAAb,GAAyB;AACrBD,EAAAA,QAAQ,EAAEvC,SAAS,CAACyC,MADC;AAErBlB,EAAAA,QAAQ,EAAEvB,SAAS,CAAC0C,IAFC;AAGrB/B,EAAAA,MAAM,EAAEX,SAAS,CAAC2C,MAHG;AAIrBzB,EAAAA,KAAK,EAAElB,SAAS,CAACyC,MAJI;AAKrB3B,EAAAA,UAAU,EAAEd,SAAS,CAAC4C,MALD;AAMrB7B,EAAAA,QAAQ,EAAEf,SAAS,CAACyC,MAAV,CAAiBI,UANN;AAOrBpC,EAAAA,IAAI,EAAET,SAAS,CAAC8C,KAAV,CAAgB;AAClBC,IAAAA,KAAK,EAAE/C,SAAS,CAACyC,MADC;AAElBO,IAAAA,KAAK,EAAEhD,SAAS,CAACyC;AAFC,GAAhB,CAPe;AAWrBrB,EAAAA,IAAI,EAAEpB,SAAS,CAACiD;AAXK,CAAzB;AAaA,eAAe1C,YAAf","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport { fetchRelatedRecords, useDataProvider, useNotify, ExporterContext, } from 'ra-core';\nimport Button from './Button';\nvar ExportButton = function (_a) {\n    var sort = _a.sort, _b = _a.filter, filter = _b === void 0 ? defaultFilter : _b, _c = _a.maxResults, maxResults = _c === void 0 ? 1000 : _c, resource = _a.resource, onClick = _a.onClick, _d = _a.label, label = _d === void 0 ? 'ra.action.export' : _d, _e = _a.icon, icon = _e === void 0 ? defaultIcon : _e, rest = __rest(_a, [\"sort\", \"filter\", \"maxResults\", \"resource\", \"onClick\", \"label\", \"icon\"]);\n    var exporter = useContext(ExporterContext);\n    var dataProvider = useDataProvider();\n    var notify = useNotify();\n    var handleClick = useCallback(function (event) {\n        dataProvider\n            .getList(resource, {\n            sort: sort,\n            filter: filter,\n            pagination: { page: 1, perPage: maxResults },\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return exporter &&\n                exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource);\n        })\n            .catch(function (error) {\n            console.error(error);\n            notify('ra.notification.http_error', 'warning');\n        });\n        if (typeof onClick === 'function') {\n            onClick(event);\n        }\n    }, [\n        dataProvider,\n        exporter,\n        filter,\n        maxResults,\n        notify,\n        onClick,\n        resource,\n        sort,\n    ]);\n    return (React.createElement(Button, __assign({ onClick: handleClick, label: label }, sanitizeRestProps(rest)), icon));\n};\nvar defaultIcon = React.createElement(DownloadIcon, null);\nvar defaultFilter = {};\nvar sanitizeRestProps = function (_a) {\n    var basePath = _a.basePath, exporter = _a.exporter, rest = __rest(_a, [\"basePath\", \"exporter\"]);\n    return rest;\n};\nExportButton.propTypes = {\n    basePath: PropTypes.string,\n    exporter: PropTypes.func,\n    filter: PropTypes.object,\n    label: PropTypes.string,\n    maxResults: PropTypes.number,\n    resource: PropTypes.string.isRequired,\n    sort: PropTypes.exact({\n        field: PropTypes.string,\n        order: PropTypes.string,\n    }),\n    icon: PropTypes.element,\n};\nexport default ExportButton;\n"]},"metadata":{},"sourceType":"module"}