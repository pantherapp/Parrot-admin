{"ast":null,"code":"import _slicedToArray from\"/Users/yrm/Sites/parrot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{TextField}from'react-admin';import{useDataProvider,Loading,Error}from'react-admin';var CommentField=function CommentField(_ref){var record=_ref.record;var dataProvider=useDataProvider();var _useState=useState(),_useState2=_slicedToArray(_useState,2),total=_useState2[0],setTotal=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){dataProvider.getList('comments',{pagination:{page:1,perPage:100000},sort:{},filter:{voice_doc_id:record.id}}).then(function(_ref2){var data=_ref2.data,total=_ref2.total;setTotal(total);setLoading(false);}).catch(function(error){setError(error);setLoading(false);});},[]);var comments={result:total+\"  Comments\"};if(loading)return/*#__PURE__*/React.createElement(Loading,null);if(error)return/*#__PURE__*/React.createElement(Error,null);if(!total)return/*#__PURE__*/React.createElement(TextField,{record:comments,source:\"result\"});return/*#__PURE__*/React.createElement(TextField,{record:comments,source:\"result\"});};export default CommentField;","map":{"version":3,"sources":["/Users/yrm/Sites/parrot/src/components/CommentField.js"],"names":["React","useState","useEffect","TextField","useDataProvider","Loading","Error","CommentField","record","dataProvider","total","setTotal","loading","setLoading","error","setError","getList","pagination","page","perPage","sort","filter","voice_doc_id","id","then","data","catch","comments","result"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OACEC,SADF,KAEO,aAFP,CAGA,OAASC,eAAT,CAA0BC,OAA1B,CAAmCC,KAAnC,KAAgD,aAAhD,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CACjC,GAAMC,CAAAA,YAAY,CAAGL,eAAe,EAApC,CADiC,cAEPH,QAAQ,EAFD,wCAE1BS,KAF0B,eAEnBC,QAFmB,8BAGHV,QAAQ,CAAC,IAAD,CAHL,yCAG1BW,OAH0B,eAGjBC,UAHiB,8BAIPZ,QAAQ,EAJD,yCAI1Ba,KAJ0B,eAInBC,QAJmB,eAKjCb,SAAS,CAAC,UAAM,CACZO,YAAY,CAACO,OAAb,CAAqB,UAArB,CAAiC,CAAEC,UAAU,CAAE,CAAEC,IAAI,CAAE,CAAR,CAAYC,OAAO,CAAE,MAArB,CAAd,CAA6CC,IAAI,CAAE,EAAnD,CAAuDC,MAAM,CAAE,CAACC,YAAY,CAAEd,MAAM,CAACe,EAAtB,CAA/D,CAAjC,EACKC,IADL,CACU,eAAqB,IAAlBC,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZf,KAAY,OAAZA,KAAY,CACvBC,QAAQ,CAACD,KAAD,CAAR,CACAG,UAAU,CAAC,KAAD,CAAV,CACH,CAJL,EAKKa,KALL,CAKW,SAAAZ,KAAK,CAAI,CACZC,QAAQ,CAACD,KAAD,CAAR,CACAD,UAAU,CAAC,KAAD,CAAV,CACH,CARL,EASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAIc,CAAAA,QAAQ,CAAG,CACbC,MAAM,CAAElB,KAAK,CAAG,YADH,CAAf,CAIA,GAAIE,OAAJ,CAAa,mBAAO,oBAAC,OAAD,MAAP,CACb,GAAIE,KAAJ,CAAW,mBAAO,oBAAC,KAAD,MAAP,CACX,GAAI,CAACJ,KAAL,CAAY,mBAAO,oBAAC,SAAD,EAAW,MAAM,CAAEiB,QAAnB,CAA6B,MAAM,CAAC,QAApC,EAAP,CAEZ,mBACE,oBAAC,SAAD,EAAW,MAAM,CAAEA,QAAnB,CAA6B,MAAM,CAAC,QAApC,EADF,CAGD,CA5BH,CA8BE,cAAepB,CAAAA,YAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  TextField\n} from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\n\nconst CommentField = ({ record }) => {\n    const dataProvider = useDataProvider();\n    const [total, setTotal] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    useEffect(() => {\n        dataProvider.getList('comments', { pagination: { page: 1 , perPage: 100000 }, sort: {}, filter: {voice_doc_id: record.id} })\n            .then(({ data, total }) => {\n                setTotal(total);                \n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n    \n    var comments = {\n      result: total + \"  Comments\"\n    }\n  \n    if (loading) return <Loading />;\n    if (error) return <Error />;\n    if (!total) return <TextField record={comments} source=\"result\" />;\n  \n    return (\n      <TextField record={comments} source=\"result\" />\n    )\n  };\n\n  export default CommentField;"]},"metadata":{},"sourceType":"module"}