{"ast":null,"code":"import _slicedToArray from\"/Users/yrm/Sites/parrot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{TextField}from'react-admin';import{useDataProvider,Loading,Error}from'react-admin';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';var CommentListField=function CommentListField(_ref){var record=_ref.record;var dataProvider=useDataProvider();var _useState=useState(),_useState2=_slicedToArray(_useState,2),total=_useState2[0],setTotal=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var comments={no:\"No Comment\"};useEffect(function(){dataProvider.getList('comments',{pagination:{page:1,perPage:100000},sort:{},filter:{voice_doc_id:record.id}}).then(function(_ref2){var data=_ref2.data,total=_ref2.total;setTotal(total);setData(data);setLoading(false);}).catch(function(error){setError(error);setLoading(false);});},[]);if(loading)return/*#__PURE__*/React.createElement(Loading,null);if(error)return/*#__PURE__*/React.createElement(Error,null);if(!total)return/*#__PURE__*/React.createElement(TextField,{record:comments,source:\"no\"});if(!data)return[];return/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"Location\"),/*#__PURE__*/React.createElement(TableCell,null,\"Voice\"))),/*#__PURE__*/React.createElement(TableBody,null,data.map(function(value){return/*#__PURE__*/React.createElement(TableRow,{key:value.created_timestamp},/*#__PURE__*/React.createElement(TableCell,null,value.address),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"audio\",{controls:true,src:value.voice_url})));})));};CommentListField.defaultProps={addLabel:true};export default CommentListField;","map":{"version":3,"sources":["/Users/yrm/Sites/parrot/src/components/CommnetListField.js"],"names":["React","useState","useEffect","TextField","useDataProvider","Loading","Error","Table","TableBody","TableCell","TableHead","TableRow","CommentListField","record","dataProvider","total","setTotal","data","setData","loading","setLoading","error","setError","comments","no","getList","pagination","page","perPage","sort","filter","voice_doc_id","id","then","catch","map","value","created_timestamp","address","voice_url","defaultProps","addLabel"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OACEC,SADF,KAEO,aAFP,CAGA,OAASC,eAAT,CAA0BC,OAA1B,CAAmCC,KAAnC,KAAgD,aAAhD,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CAErC,GAAMC,CAAAA,YAAY,CAAGV,eAAe,EAApC,CAFqC,cAGXH,QAAQ,EAHG,wCAG9Bc,KAH8B,eAGvBC,QAHuB,8BAIbf,QAAQ,EAJK,yCAI9BgB,IAJ8B,eAIxBC,OAJwB,8BAKPjB,QAAQ,CAAC,IAAD,CALD,yCAK9BkB,OAL8B,eAKrBC,UALqB,8BAMXnB,QAAQ,EANG,yCAM9BoB,KAN8B,eAMvBC,QANuB,eAOrC,GAAMC,CAAAA,QAAQ,CAAG,CACfC,EAAE,CAAE,YADW,CAAjB,CAGAtB,SAAS,CAAC,UAAM,CACZY,YAAY,CAACW,OAAb,CAAqB,UAArB,CAAiC,CAAEC,UAAU,CAAE,CAAEC,IAAI,CAAE,CAAR,CAAYC,OAAO,CAAE,MAArB,CAAd,CAA6CC,IAAI,CAAE,EAAnD,CAAuDC,MAAM,CAAE,CAACC,YAAY,CAAElB,MAAM,CAACmB,EAAtB,CAA/D,CAAjC,EACKC,IADL,CACU,eAAqB,IAAlBhB,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZF,KAAY,OAAZA,KAAY,CACvBC,QAAQ,CAACD,KAAD,CAAR,CACAG,OAAO,CAACD,IAAD,CAAP,CACAG,UAAU,CAAC,KAAD,CAAV,CACH,CALL,EAMKc,KANL,CAMW,SAAAb,KAAK,CAAI,CACZC,QAAQ,CAACD,KAAD,CAAR,CACAD,UAAU,CAAC,KAAD,CAAV,CACH,CATL,EAUH,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAID,OAAJ,CAAa,mBAAO,oBAAC,OAAD,MAAP,CACb,GAAIE,KAAJ,CAAW,mBAAO,oBAAC,KAAD,MAAP,CACX,GAAI,CAACN,KAAL,CAAY,mBAAO,oBAAC,SAAD,EAAW,MAAM,CAAEQ,QAAnB,CAA6B,MAAM,CAAC,IAApC,EAAP,CACZ,GAAI,CAACN,IAAL,CAAW,MAAO,EAAP,CAEX,mBACE,oBAAC,KAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,QAAD,mBACE,oBAAC,SAAD,iBADF,cAEE,oBAAC,SAAD,cAFF,CADF,CADF,cAOE,oBAAC,SAAD,MACGA,IAAI,CAACkB,GAAL,CAAS,SAAAC,KAAK,CAAI,CACjB,mBACE,oBAAC,QAAD,EAAU,GAAG,CAAEA,KAAK,CAACC,iBAArB,eACE,oBAAC,SAAD,MAAYD,KAAK,CAACE,OAAlB,CADF,cAEE,oBAAC,SAAD,mBAAW,6BAAO,QAAQ,KAAf,CAAgB,GAAG,CAAEF,KAAK,CAACG,SAA3B,EAAX,CAFF,CADF,CAMD,CAPA,CADH,CAPF,CADF,CAoBD,CAhDH,CAkDE3B,gBAAgB,CAAC4B,YAAjB,CAAgC,CAC9BC,QAAQ,CAAE,IADoB,CAAhC,CAIA,cAAe7B,CAAAA,gBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  TextField\n} from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst CommentListField = ({ record }) => {\n\n    const dataProvider = useDataProvider();\n    const [total, setTotal] = useState();\n    const [data, setData] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    const comments = {\n      no: \"No Comment\"\n    }\n    useEffect(() => {\n        dataProvider.getList('comments', { pagination: { page: 1 , perPage: 100000 }, sort: {}, filter: {voice_doc_id: record.id} })\n            .then(({ data, total }) => {\n                setTotal(total);  \n                setData(data);\n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n  \n    if (loading) return <Loading />;\n    if (error) return <Error />;\n    if (!total) return <TextField record={comments} source=\"no\" />;\n    if (!data) return [];\n  \n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Location</TableCell>\n            <TableCell>Voice</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {data.map(value => {\n            return (\n              <TableRow key={value.created_timestamp}>\n                <TableCell>{value.address}</TableCell>\n                <TableCell><audio controls src={value.voice_url} /></TableCell>\n              </TableRow>\n            )\n          })}\n        </TableBody>\n      </Table>\n    );\n  };\n  \n  CommentListField.defaultProps = {\n    addLabel: true,\n  };\n\n  export default CommentListField;"]},"metadata":{},"sourceType":"module"}