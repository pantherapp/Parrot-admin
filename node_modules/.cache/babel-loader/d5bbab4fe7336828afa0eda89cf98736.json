{"ast":null,"code":"var _jsxFileName = \"/Users/yrm/Sites/parrot/src/components/CommnetListField.js\";\nimport React, { useState, useEffect } from 'react';\nimport { TextField } from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst CommentListField = ({\n  record\n}) => {\n  const dataProvider = useDataProvider();\n  const [total, setTotal] = useState();\n  const [data, setData] = useState();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState();\n  const comments = {\n    no: \"No Comment\"\n  };\n  useEffect(() => {\n    dataProvider.getList('comments', {\n      pagination: {\n        page: 1,\n        perPage: 100000\n      },\n      sort: {},\n      filter: {\n        voice_doc_id: record.id\n      }\n    }).then(({\n      data,\n      total\n    }) => {\n      setTotal(total);\n      setData(data);\n      setLoading(false);\n    }).catch(error => {\n      setError(error);\n      setLoading(false);\n    });\n  }, []);\n  if (loading) return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 25\n    }\n  });\n  if (error) return /*#__PURE__*/React.createElement(Error, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 23\n    }\n  });\n  if (!total) return /*#__PURE__*/React.createElement(TextField, {\n    record: comments,\n    source: \"no\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 24\n    }\n  });\n  if (!data) return [];\n  return /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"Location\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, \"Voice\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, data.map(value => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: value.created_timestamp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, value.address), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"audio\", {\n      controls: true,\n      src: value.voice_url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 28\n      }\n    })));\n  })));\n};\n\nCommentListField.defaultProps = {\n  addLabel: true\n};\nexport default CommentListField;","map":{"version":3,"sources":["/Users/yrm/Sites/parrot/src/components/CommnetListField.js"],"names":["React","useState","useEffect","TextField","useDataProvider","Loading","Error","Table","TableBody","TableCell","TableHead","TableRow","CommentListField","record","dataProvider","total","setTotal","data","setData","loading","setLoading","error","setError","comments","no","getList","pagination","page","perPage","sort","filter","voice_doc_id","id","then","catch","map","value","created_timestamp","address","voice_url","defaultProps","addLabel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  TextField\n} from 'react-admin';\nimport { useDataProvider, Loading, Error } from 'react-admin';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst CommentListField = ({ record }) => {\n\n    const dataProvider = useDataProvider();\n    const [total, setTotal] = useState();\n    const [data, setData] = useState();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState();\n    const comments = {\n      no: \"No Comment\"\n    }\n    useEffect(() => {\n        dataProvider.getList('comments', { pagination: { page: 1 , perPage: 100000 }, sort: {}, filter: {voice_doc_id: record.id} })\n            .then(({ data, total }) => {\n                setTotal(total);  \n                setData(data);\n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            })\n    }, []);\n  \n    if (loading) return <Loading />;\n    if (error) return <Error />;\n    if (!total) return <TextField record={comments} source=\"no\" />;\n    if (!data) return [];\n  \n    return (\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Location</TableCell>\n            <TableCell>Voice</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {data.map(value => {\n            return (\n              <TableRow key={value.created_timestamp}>\n                <TableCell>{value.address}</TableCell>\n                <TableCell><audio controls src={value.voice_url} /></TableCell>\n              </TableRow>\n            )\n          })}\n        </TableBody>\n      </Table>\n    );\n  };\n  \n  CommentListField.defaultProps = {\n    addLabel: true,\n  };\n\n  export default CommentListField;"]},"metadata":{},"sourceType":"module"}